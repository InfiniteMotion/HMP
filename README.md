# Hearable Music Player

一款现代化的本地音乐播放器，基于Jetpack Compose构建，提供流畅的用户体验和丰富的音乐播放功能。

## 🎯 项目介绍

Hearable Music Player是我个人开发的一款专注于本地音乐播放的Android应用，致力于提供简洁优雅的用户界面和流畅的播放体验。应用采用最新的Jetpack Compose技术栈开发，支持音乐文件扫描、播放控制、播放列表管理以及AI驱动的音乐推荐功能。

作为个人项目，我希望通过这个应用探索Android开发的最佳实践，学习Jetpack Compose和Media3等新技术，同时为用户提供一个实用的音乐播放工具。

### 项目现状

- 已完成模块化架构设计
- 已实现核心音乐播放功能
- 已集成DeepSeek API实现AI推荐
- 已实现基本的UI界面和交互
- 正在进行架构优化和性能提升

## ✨ 核心功能

### 已实现功能

- **本地音乐扫描**：自动扫描设备中的音乐文件，读取ID3标签信息
- **播放控制**：提供播放、暂停、上一首、下一首、快进、快退等基本控制
- **播放列表管理**：创建、编辑和删除自定义播放列表
- **AI驱动推荐**：支持多个 AI 服务商（DeepSeek、OpenAI、Claude、通义千问、文心一言），提供每日音乐推荐功能
- **推荐刷新策略**：支持按时间、按启动次数或智能刷新，用户可自定义
- **歌词显示**：支持滚动歌词显示
- **标签展示**：显示音乐文件的详细标签信息
- **用户界面**：个性化用户主页，展示听歌统计和偏好
- **暗色/亮色主题**：支持系统主题自动切换
- **音频效果**：支持均衡器、低音增强、环绕音等调节

### 计划实现功能

- **桌面小组件**：支持桌面音乐控制小组件
- **音乐标签编辑**：支持编辑音乐文件的ID3标签
- **睡眠定时**：支持定时关闭音乐播放
- **手势操作**：支持滑动切换歌曲、调节音量等手势操作

## 🛠️ 技术栈

### 核心技术

- **开发语言**：Kotlin
- **UI框架**：Jetpack Compose
- **架构模式**：MVVM
- **依赖注入**：Hilt
- **数据存储**：
  - Room (本地数据库)
  - DataStore (偏好设置)
- **媒体播放**：AndroidX Media3 (ExoPlayer)
- **网络请求**：Retrofit + OkHttp
- **JSON解析**：Gson
- **音乐标签解析**：Jaudiotagger
- **AI集成**：多服务商支持（DeepSeek、OpenAI、Claude、通义千问、文心一言）
- **安全存储**：API 密钥加密存储

### 模块化架构

项目采用模块化架构，划分为以下核心模块：

- **app**：应用入口模块，包含MainActivity和Application类
- **core-data**：数据层模块，包含Room数据库、DAO和Repository实现
- **core-domain**：领域层模块，包含Use Cases和业务逻辑
- **core-player**：播放核心模块，包含Media3服务和播放控制逻辑
- **feature-ui**：UI功能模块，包含Compose页面和组件

## 📱 系统要求

- Android 12.0 (API 31) 及以上
- 存储空间权限
- 网络权限 (用于推荐功能)

## 🚀 安装与使用

### 环境要求

- Android Studio Hedgehog | 2023.1.1 或更高版本
- Kotlin 1.9.0 或更高版本
- Gradle 8.0 或更高版本

### 安装步骤

1. 克隆项目代码
   ```bash
   git clone https://github.com/InfiniteMotion/HMP.git
   ```

2. 使用Android Studio打开项目

3. 构建并运行到您的设备或模拟器

4. 首次启动时，应用会请求存储权限用于扫描本地音乐文件

5. 扫描完成后，您可以在主界面浏览和播放音乐

## 🎨 界面展示

- **主界面**：音乐分类和推荐内容
- **列表界面**：显示所有歌曲和播放列表
- **播放界面**：专辑封面、歌词和播放控制
- **个人中心**：用户听歌统计和设置

## 📖 使用指南

### 基本操作

- **播放音乐**：点击歌曲列表中的任意歌曲即可开始播放
- **控制播放**：在播放界面或通知栏中使用播放、暂停、上一首、下一首按钮
- **创建播放列表**：在列表界面点击"新建播放列表"按钮，输入名称后添加歌曲
- **查看歌词**：在播放界面点击歌词区域即可显示滚动歌词

### 高级功能

- **AI推荐**：基于AI生成的标签进行推荐，支持多个 AI 服务商
- **服务商管理**：在 AI 配置页面中选择和配置不同的 AI 服务商
- **刷新策略**：在设置页面配置每日推荐的刷新规则（按时间/按启动次数/智能）
- **主题切换**：在设置界面中选择暗色或亮色主题
- **听歌统计**：在个人中心查看您的听歌时长和偏好统计

## 📝 开发日志

### v5.3 (2025-12-30)
- 实现多 AI 服务商支持（DeepSeek、OpenAI、Claude、通义千问、文心一言）
- 添加 API 密钥加密存储机制
- 实现 API 连接测试功能
- 添加 AI 服务商配置界面
- 实现每日推荐刷新策略系统
- 添加每日推荐持久化存储
- 优化 AI 批量处理流程
- 添加处理进度显示和结果统计

### v5.2 (2025-12-03)
- 添加主题模式切换功能
- 添加自定义主题和AI功能页面
- 添加按艺术家页面
- 优化歌词组件
- 重构播放控制视图模型和用户界面组件
- 实现动态主题设置并优化用户界面组件
- 引入TabScreen模板
- 添加音频效果屏幕并重构用户界面
- 修复播放进度调整失败的漏洞
- 统一调整UI组件颜色以适配主题色彩体系

### v5.0 (2025-11-20)
- 模块化架构迁移完成
- 实现Hilt依赖注入
- 升级数据库版本支持分页查询
- 迁移到Media3 MediaSession
- 优化播放控制流程

### v4.0 (2025-05-06)
- 重构代码结构
- 优化播放逻辑
- 提升应用稳定性

### v3.0 (2025-05-06)
- 更新README文档
- 优化MusicViewModel逻辑
- 完善播放控制功能

### v2.0 (2025-04-23)
- 实现播放列表功能
- 添加基础播放控制功能
- 完成第一个可运行版本

### v1.0 (2025-03-31)
- 项目初始化
- 创建基础项目结构
- 配置Git仓库

## 🤝 贡献指南

作为个人项目，我欢迎任何形式的贡献和反馈。如果您有任何建议或问题，请随时联系我。

### 贡献方式

1. 提交Issue报告bug或提出功能建议
2. 提交Pull Request修复bug或添加新功能
3. 提供使用反馈和改进建议

### 代码规范

- 遵循Kotlin官方代码风格指南
- 使用Jetpack Compose的最佳实践
- 保持代码简洁、可读性强
- 添加必要的注释和文档

## 📄 许可证

该项目使用MIT许可证 - 详情请查看LICENSE文件

---

© 2025 Hearable Music Player | Developed by WLYB